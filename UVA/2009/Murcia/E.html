<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>The amazing triangle counting machine</title>
</head>

<body bgcolor="#FFFFFF" lang="EN">

<div align="center"><center>
<table border="0" bgcolor="#0060F0" summary="Table used for layout (ugh)">
<tbody>
  <tr>
    <td><b>&nbsp;<font color="#C0FFFF" size="5">E. The Amazing Triangle Counting Machine</font>&nbsp;</b></td>
  </tr>
</tbody>
</table>
</center></div>

<h2><font color="#0070E8">Context</font></h2>
<!-- ¿Dónde fue el h1? -->

<p><em>Acme Counting Machines</em> has hired you as a consultant to finish their TCM-2000
project. The TCM-2000 is a machine for counting triangles in pictures by means of a video
camera attached to a computer. They have already done the easy part of preprocessing the
picture to extract the edges and convert the image into a list of segments. Your job is to
write a program to count all the non-overlapping triangles defined by those segments. A
triangle consists of exactly three segments.</p>

<h2><font color="#0070E8">The Problem</font></h2>

<p>Your program will receive a list of non-intersecting and non-overlapping segments and
it has to return the number of non-overlapping triangles in the figure. For example, given
the following figure:</p>

<p align="center"><img src="images/ejemplo.tikz.png" width="263" height="368"> </p>

<p>Your program would receive the following list of segments: AB, AD, AF, BC, BF, CD, CE,
CF, DE and DF. Then, it will have to count the 5 triangles present in the figure, namely:
ABF, ADF, BCF, CDE and CDF.</p>

<h2><font color="#0070E8">The Input</font></h2>

<p>The input format is as follows:</p>

<p>An integer in a single line which says the number of figures that your program will
have to process. Then, for each figure there will be:

<ul>
  <li>An integer in a single line which says the number of segments in that figure.</li>
  <li>A line for each segment, with four numbers each line. The first two numbers are the
    coordinates of one of the end points of the segment, and the last two numbers are the
    coordinates of the second end point. The numbers may be either integers or floating point
    numbers with at most one figure after the decimal point.</li>
</ul>

<h2><font color="#0070E8">The Output</font></h2>

<p>The output consists of one line for each case, with a single integer number each: the
number of triangles found.</p>

<h2><font color="#0070E8">Sample Input</font></h2>

<pre>1
10
0 0 0 1
0 0 0.5 0.5
0 0 1 0
0 1 0.5 0.5
0 1 0.5 1.5
0 1 1 1
0.5 0.5 1 0
0.5 0.5 1 1
0.5 1.5 1 1
1 0 1 1
</pre>

<h2><font color="#0070E8">Sample Output</font></h2>

<pre>5
</pre>

<hr>

<p align="right"><font color="#000040"><small><small><a href="http://dis.um.es/contest"
target="_blank">OMP'09</a><br>
<a href="http://www.um.es/informatica" target="_blank">Facultad de Informatica<br>
</a><a href="http://www.um.es" target="_blank">Universidad de Murcia (SPAIN)</a></small></small></p>
</font>
</body>
</html>
